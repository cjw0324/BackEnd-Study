# 10. ìŠ¤í”„ë§ íƒ€ì… ì»¨ë²„í„°

- í”„ë¡œì íŠ¸ ìƒì„±
- ìŠ¤í”„ë§ íƒ€ì… ì»¨ë²„í„° ì†Œê°œ
- íƒ€ì… ì»¨ë²„í„° - Converter
- ì»¨ë²„ì „ ì„œë¹„ìŠ¤ - ConversionService
- ìŠ¤í”„ë§ì— Converter ì ìš©í•˜ê¸°
- ë·° í…œí”Œë¦¿ì— ì»¨ë²„í„° ì ìš©í•˜ê¸°
- í¬ë§·í„° - Formatter
- í¬ë§·í„°ë¥¼ ì§€ì›í•˜ëŠ” ì»¨ë²„ì „ ì„œë¹„ìŠ¤
- í¬ë§·í„° ì ìš©í•˜ê¸°
- ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê¸°ë³¸ í¬ë§·í„°

## í”„ë¡œì íŠ¸ ìƒì„±

- dependencies : Spring Web, Lombok, Thymeleaf

## ìŠ¤í”„ë§ íƒ€ì… ì»¨ë²„í„° ì†Œê°œ

**HelloController - ë¬¸ì íƒ€ì…ì„ ìˆ«ì íƒ€ì…ìœ¼ë¡œ ë³€ê²½**

```java
@RestController
public class HelloController {
    @GetMapping("/hello-v1")
    public String helloV1(HttpServletRequest request) {
        String data = request.getParameter("data");
        Integer intValue = Integer.valueOf(data);
        System.out.println("int value = " + intValue);
        return "ok";
    }
}
```

**ì‹¤í–‰**
[http://localhost:8080/hello-v1?data=10](http://localhost:8080/hello-v1?data=10)

HTTP ìš”ì²­ íŒŒë¼ë¯¸í„°ëŠ” ëª¨ë‘ ë¬¸ìë¡œ ì²˜ë¦¬ëœë‹¤. ë”°ë¼ì„œ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìë°”ì—ì„œ ë‹¤ë¥¸ íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•˜ë ¤ë©´, ìˆ«ì íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒ ê°™ì€ ê³¼ì •ì„ ê±°ì³ì•¼ í•œë‹¤.

ì´ë²ˆì—ëŠ” ìŠ¤í”„ë§ MVC ê°€ ì œê³µí•˜ëŠ”  â€œ@RequestParamâ€ ì„ ì‚¬ìš©í•´ë³´ì.

**HelloController - helloV2**

```java
@GetMapping("/hello-v2")
public String helloV2(@RequestParam Integer data) {
    System.out.println("data = " + data);
    return "ok";
}
```

**ì‹¤í–‰**

[http://localhost:8080/hello-v2?data=10](http://localhost:8080/hello-v2?data=10)

HTTP ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” data=10 ë¶€ë¶„ì—ì„œ 10ì€ ìˆ«ìê°€ ì•„ë‹Œ ë¬¸ì 10ì´ë‹¤.

ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” â€œ`@RequestParam`â€ ì„ ì‚¬ìš©í•˜ë©´, ì´ ë¬¸ì 10 ì„ Integer íƒ€ì…ì˜ ìˆ«ì 10ìœ¼ë¡œ í¸ë¦¬í•˜ê²Œ ë°›ì„ ìˆ˜ ìˆë‹¤.

**â†’ ì–´ë–»ê²Œ??**

**ìŠ¤í”„ë§ì´ ì¤‘ê°„ì—ì„œ íƒ€ì…ì„ ë³€í™˜í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.**

**â€œ`@ModelAttribute`â€ ì˜ˆì‹œ**

```java
@GetMapping("/hello-my1")
public String helloMy1(@ModelAttribute UserData data) {
    System.out.println("data = " + data.getData());
    return "ok";
}
```

**ì‹¤í–‰**

[http://localhost:8080/hello-my1?data=10](http://localhost:8080/hello-my1?data=10)

ì´ëŠ” **ì»¨ë²„í„° ì¸í„°í˜ì´ìŠ¤ ë¥¼ í†µí•´ êµ¬í˜„ë˜ê³ , ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ì»¨ë²„í„°ë¥¼ ë§Œë“¤ìˆ˜ë„ ìˆë‹¤.**

**Converter Interface**

```java
package org.springframework.core.convert.converter;
public interface Converter<S, T> {
 T convert(S source);
}
```

## íƒ€ì… ì»¨ë²„í„° - Converter

íƒ€ì… ì»¨ë²„í„°ë€?

íƒ€ì… ì»¨ë²„í„°ë¥¼ ì‚¬ìš©í•˜ë ¤ë¨¼ â€œ`org.springframework.core.convert.converter.Converter`â€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ëœë‹¤.

**Integer â†” String ì˜ˆì œ.**

**StringToIntegerConverter**

```java
@Override
public Integer convert(String source) {
    log.info("convert source = {}", source);
    Integer integer = Integer.valueOf(source);
    return integer;
}
```

**IntegerToStringConverter**

```java
@Override
public String convert(Integer source) {
    log.info("convert source = {}", source);
    return String.valueOf(source);
}
```

**String â†” Object ì˜ˆì œ.**

```java
@Getter
@EqualsAndHashCode
public class IpPort {
    private String ip;
    private int port;

    public IpPort(String ip, int port) {
        this.ip = ip;
        this.port = port;
    }
}
```

```java
@Slf4j
public class IpPortToStringConverter implements Converter<IpPort, String> {

    @Override
    public String convert(IpPort source) {
        log.info("convert source = {}", source);
        return source.getIp() + ":" + source.getPort();
    }
}

@Slf4j
public class StringToIpPortConverter implements Converter<String, IpPort> {
    @Override
    public IpPort convert(String source) {
        log.info("convert source = {}", source);
        String[] split = source.split(":");
        String ip = split[0];
        int port = Integer.parseInt(split[1]);

        return new IpPort(ip, port);
    }
}
```

ì™œ? íƒ€ì… ì»¨ë²„í„°ë¥¼ í•˜ë‚˜í•˜ë‚˜ ì‚¬ìš©í•˜ë©´ì„œ ì‚¬ìš©í• ê¹Œ??

*ì‚¬ì‹¤ ì´ë ‡ê²Œ ì‚¬ìš©í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤*. ë§Œë“  **íƒ€ì… ì»¨ë²„í„°ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ìœ„í•´ ë§Œë“œëŠ”ê²ƒì´ ì•„ë‹ˆë‹¤!**

**ê·¸ëŸ¬ë©´? â†’ íƒ€ì… ì»¨ë²„í„°ë¥¼ ë“±ë¡í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ í¸ë¦¬í•˜ê²Œ ë³€í™˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì—­í• ì„ í•  ìˆ˜ ìˆë‹¤!**

## ì»¨ë²„ì „ ì„œë¹„ìŠ¤ - ConversionService

ì´ë ‡ê²Œ íƒ€ì… ì»¨ë²„í„°ë¥¼ í•˜ë‚˜í•˜ë‚˜ ì§ì ‘ ì°¾ì•„ì„œ íƒ€ì… ë³€í™˜ì— ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë§¤ìš° ë¶ˆí¸í•˜ë‹¤. ê·¸ë˜ì„œ ìŠ¤í”„ë§ì€ ê°œë³„ ì»¨ë²„í„°ë¥¼ ëª¨ì•„ë‘ê³  ê·¸ê²ƒë“¤ì„ ë¬¶ì–´ì„œ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë°, ì´ê²ƒì´ ë°”ë¡œ ì»¨ë²„ì „ ì„œë¹„ìŠ¤

â€œ`ConversionService`â€ ì´ë‹¤.

â†’ í™•ì¸í•˜ëŠ” ê¸°ëŠ¥ê³¼, ì»¨ë²„íŒ… ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

**ConversionServiceTest - ì»¨ë²„ì „ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ ì½”ë“œ**

```java
public class ConversionServiceTest {
    @Test
    void conversionService() {
        DefaultConversionService conversionService = new DefaultConversionService();
        conversionService.addConverter(new StringToIntegerConverter());
        conversionService.addConverter(new IntegerToStringConverter());
        conversionService.addConverter(new IpPortToStringConverter());
        conversionService.addConverter(new StringToIpPortConverter());
        //ë¬¸ì 10 -> ìˆ«ì 10
        assertThat(conversionService.convert("10", Integer.class)).isEqualTo(10);

        //ìˆ«ì 10 -> ë¬¸ì 10
        assertThat(conversionService.convert(10, String.class)).isEqualTo("10");

        // ë¬¸ìì—´ 127.0.0.1:8080 -> IpPort
        assertThat(conversionService.convert("127.0.0.1:8080", IpPort.class)).isEqualTo(new IpPort("127.0.0.1", 8080));

        //IpPort -> ë¬¸ìì—´ 127.0.0.1:8080
        assertThat(conversionService.convert(new IpPort("127.0.0.1", 8080), String.class)).isEqualTo("127.0.0.1:8080");
    }
}
```

â†’ conversionService ì— ìš°ë¦¬ê°€ ë§Œë“  Converter ë“¤ì„ ì¶”ê°€í•˜ê³ , convert ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

`convert(â€ë³€í™˜ í•˜ê³ ì í•˜ëŠ” ê°ì²´â€, ë³€í™˜í•˜ê³  ì‹¶ì€ ë°˜í™˜ íƒ€ì…)`

**íƒ€ì… ë³€í™˜ì„ ì›í•˜ëŠ” ì‚¬ìš©ìëŠ” ì»¨ë²„ì „ ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë©´ ëœë‹¤.**

**ë‹¨, ë“±ë¡í•˜ëŠ” ë¶€ë¶„ê³¼ ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬í•˜ê³ , ìŠ¤í”„ë§ ë¹ˆê³¼ ê°™ì´ ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.**

**ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ì›ì¹™ - SOLID ì˜ ISP (Interface Segregation Principle)**

**ConversionService â†” ConverterRegistry** , ì‚¬ìš©ê³¼ ë“±ë¡ì„ ë¶„ë¦¬í•œë‹¤.

**ë”°ë¼ì„œ ìŠ¤í”„ë§ì€ ë‚´ë¶€ì—ì„œ ConversionServiceë¥¼ ì‚¬ìš©í•´ì„œ íƒ€ì…ì„ ë³€í™˜í•œë‹¤.**

## ìŠ¤í”„ë§ì— Converter ì ìš©í•˜ê¸°

ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— **Converter ë¥¼ ì ìš©í•˜ì.**

```java
    @GetMapping("/hello-v2")
    public String helloV2(@RequestParam Integer data) {
        System.out.println("data = " + data);
        return "ok";
    }
```

**WebConfig**

```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addFormatters(FormatterRegistry registry) {
        registry.addConverter(new StringToIntegerConverter());
        registry.addConverter(new IntegerToStringConverter());
        registry.addConverter(new StringToIpPortConverter());
        registry.addConverter(new IpPortToStringConverter());

    }
}
```

**ì‹¤í–‰ ê²°ê³¼**

[http://localhost:8080/hello-v2?data=10](http://localhost:8080/hello-v2?data=10)

ì´ì œ ìœ„ URLë¡œ ìš”ì²­í•œë‹¤ë©´, ìš°ë¦¬ê°€ ë§Œë“  StringToIntegerConverterê°€ ì‚¬ìš©ëœë‹¤.

ê·¸ë ‡ì§€ë§Œ, ìœ„ì˜ registry ë“±ë¡ì„ ëª¨ë‘ ì£¼ì„ ì²˜ë¦¬ í•˜ë”ë¼ë„ ê¸°ë³¸ ì»¨ë²„í„°ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ì‹¤í–‰ì€ ëœë‹¤.

í•˜ì§€ë§Œ, ì¶”ê°€í•œ ì§ì ‘ ë§Œë“  ì»¨ë²„í„°ëŠ” ê¸°ë³¸ ì»¨ë²„í„°ë³´ë‹¤ ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì—, ì§ì ‘ ì¶”ê°€í•œ ì»¨ë²„í„°ê°€ ì‚¬ìš©ëœë‹¤.

ê·¸ë ‡ë‹¤ë©´, ì§ì ‘ ë§Œë“  IpPort ë³€í™˜ ì»¨ë²„í„°ë¥¼ ì‚¬ìš©í•´ë³´ì!

**Controller ì¶”ê°€**

```java
@GetMapping("/ip-port")
public String ipPort(@RequestParam IpPort ipPort) {
    System.out.println("ip = " + ipPort.getIp());
    System.out.println("port = " + ipPort.getPort());
    return "ok";
}
```

**ì‹¤í–‰ ê²°ê³¼**

[http://localhost:8080/ip-port?ipPort=127.0.0.1:8080](http://localhost:8080/ip-port?ipPort=127.0.0.1:8080)

```java
2024-11-04T16:42:05.179+09:00  INFO 79581 --- [typeconverter] [nio-8080-exec-5] h.t.converter.StringToIpPortConverter    : convert source = 127.0.0.1:8080
ip = 127.0.0.1
port = 8080

```

â†’ ìš°ë¦¬ê°€ ë§Œë“  StringToIpPortConverter ê°€ ì˜ ì‚¬ìš©ë˜ì—ˆë‹¤.

## ë·° í…œí”Œë¦¿ì— ì»¨ë²„í„° ì ìš©í•˜ê¸°

**converter-view.html**

```java
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body> <ul>
    <li>${number}: <span th:text="${number}" ></span></li>
    <li>${{number}}: <span th:text="${{number}}" ></span></li>
    <li>${ipPort}: <span th:text="${ipPort}" ></span></li>
    <li>${{ipPort}}: <span th:text="${{ipPort}}" ></span></li>
</ul>
</body>
</html>
```

â†’ `${â€¦}` : ì»¨ë²„í„° ì ìš© x

â†’ `${{â€¦}}` : ì»¨ë²„í„° ì ìš© o

**ì‹¤í–‰ ê²°ê³¼**

```java
${number}: 10000
${{number}}: 10000
${ipPort}: hello.typeconverter.type.IpPort@59cb0946
${{ipPort}}: 127.0.0.1:8080
```

1. `${number}: 10000` : ì»¨ë²„íŒ… í•˜ì§€ ì•Šì•„ì„œ ìˆ«ì 10000
2. `${{number}}: 10000` : ì»¨ë²„íŒ… í•˜ì—¬ ë¬¸ì 10000
3. `${ipPort}: hello.typeconverter.type.IpPort@59cb0946` : ì»¨ë²„íŒ… í•˜ì§€ ì•Šì•„ì„œ ê°ì²´ ì£¼ì†Œ
4. `${{ipPort}}: 127.0.0.1:8080` : ì»¨ë²„íŒ… í•˜ì—¬ String íƒ€ì… ë³€í™˜ ì‹œ IpPortToStringConverter ì ìš©ë¨

### í¼ì— ì ìš©í•˜ê¸°

**ConverterController ì¶”ê°€**

```java
    @GetMapping("/converter/edit")
    public String converterForm(Model model) {
        IpPort ipPort = new IpPort("127.0.0.1", 8080);
        Form form = new Form(ipPort);
        model.addAttribute("form", form);
        return "converter-form";
    }

    @PostMapping("/converter/edit")
    public String converterEdit(@ModelAttribute Form form, Model model) {
        IpPort ipPort = form.getIpPort();
        model.addAttribute("ipPort", ipPort);
        return "converter-view";
    }
    @Data
    static class Form {
        private IpPort ipPort;
        public Form(IpPort ipPort) {
            this.ipPort = ipPort;
        } }
```

**converter-form.html**

```java
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form th:object="${form}" th:method="post">
    th:field <input type="text" th:field="*{ipPort}"><br/>
    th:value <input type="text" th:value="*{ipPort}">(ë³´ì—¬ì£¼ê¸° ìš©ë„)<br/> <input type="submit"/>
</form>
</body>
</html>
```

**ì‹¤í–‰ ê²°ê³¼**

[http://localhost:8080/converter/edit](http://localhost:8080/converter/edit)

![image.png](10%20%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B8%20%E1%84%8F%E1%85%A5%E1%86%AB%E1%84%87%E1%85%A5%E1%84%90%E1%85%A5%2011d29d746aff80d6956ed65ff73de942/image.png)

![image.png](10%20%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B8%20%E1%84%8F%E1%85%A5%E1%86%AB%E1%84%87%E1%85%A5%E1%84%90%E1%85%A5%2011d29d746aff80d6956ed65ff73de942/image%201.png)

**ë‹¨! ì´ ê³¼ì •ì—ì„œëŠ” JSONì„ ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ ì•„ë‹ˆë‹¤!**

ì´ë•ŒëŠ” Json Parsing Library ì¸ Jackson â†’ ObjectMapper ë“±ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ë‹¤.

**ì—¬ê¸°ì„œ Json ì„ ë„˜ê¸°ê³  íŒŒì‹±í•˜ëŠ”ê²Œ ì•„ë‹ˆë‹¤. í—·ê°ˆë¦¬ì§€ ë§ì!**

## í¬ë§·í„° - Formatter

ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê°ì²´ë¥¼ ë¬¸ìë¡œ, ë¬¸ìë¥¼ ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ì˜ˆì‹œ.

- Integer â†’ String  ì¶œë ¥ ì‹œì ì— ìˆ«ì 1000 â†’ ë¬¸ì 1,000
- ë˜ëŠ” ë¬¸ì 1,000 â†’ ìˆ«ì 1000

- ë‚ ì§œ ê°ì²´ë¥¼ ë¬¸ìì¸ â€œ2024-11-04 17:14:30â€ ì™€ ê°™ì´ ì¶œë ¥í•˜ê±°ë‚˜ ê·¸ ë°˜ëŒ€ì˜ ìƒí™©.

**â†’ Locale ìˆ«ìì™€ ë‚ ì§œ í‘œí˜„ì€ í˜„ì§€í™” ì •ë³´ê°€ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.**

**Converter? Formatter?**

Converter â†’ ë²”ìš©

Formatter â†’ ë¬¸ìì— íŠ¹í™”ë˜ì–´ ìˆê³  + í˜„ì§€í™” - Locale ì´ë‹¤.

**ì¦‰, Converterì˜ íŠ¹ë³„í•œ ë²„ì „ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.**

### í¬ë§·í„° - Formatter ë§Œë“¤ê¸°

- String print(T object, Locale locale) : ê°ì²´ë¥¼ ë¬¸ìë¡œ ë³€ê²½í•œë‹¤
- T parse(String text, Locale locale) : ë¬¸ìë¥¼ ê°ì²´ë¡œ ë³€ê²½í•œë‹¤

**ëª©í‘œ : â€œ1,000â€ â†’ 1000 & 1000 â†’ â€œ1,000â€**

**MyNumberFormatter**

```java
@Slf4j
public class MyNumberFormatter implements Formatter<Number>{
    @Override
    public Number parse(String text, Locale locale) throws ParseException {
        log.info("text={}, locale={}", text, locale);
        //"1,000" -> 1000
        NumberFormat format = NumberFormat.getInstance(locale);
        return format.parse(text);
    }

    @Override
    public String print(Number object, Locale locale) {
        log.info("object={}, locale={}", object, locale);
        NumberFormat instance = NumberFormat.getInstance(locale);
        return instance.format(object);
    }
}
```

**TestCode**

```java
class MyNumberFormatterTest {

    MyNumberFormatter formatter = new MyNumberFormatter();

    @Test
    void parse() throws ParseException {
        Number result = formatter.parse("1,000", Locale.KOREA);
        assertThat(result).isEqualTo(1000L);
    }

    @Test
    void print() {
        String result = formatter.print(1000, Locale.KOREA);
        assertThat(result).isEqualTo("1,000");
    }
}
```

**â†’ ì´ì œ ì´ê²ƒì„ ì»¨ë²„ì „ ì„œë¹„ìŠ¤ì— í¬ë©§í„°ë¥¼ ë“±ë¡í•´ì„œ ì“°ëŠ”ë²•ì„ ì•Œì•„ë³´ì!**

## í¬ë§·í„°ë¥¼ ì§€ì›í•˜ëŠ” ì»¨ë²„ì „ ì„œë¹„ìŠ¤

`DefaultFormattingConversionService` ëŠ” `FormattingConversionService` ì— ê¸°ë³¸ì ì¸ í†µí™”, ìˆ«ì ê´€ë ¨ ëª‡ê°€ì§€ ê¸°ë³¸ í¬ë§·í„°ë¥¼ ì¶”ê°€í•´ì„œ ì œê³µí•œë‹¤.

**Test code**

```java
public class FormattingConversionServiceTest {
    @Test
    void formattingConversionSerivice() {
        DefaultFormattingConversionService conversionService = new DefaultFormattingConversionService();

        //ì»¨ë²„í„° ë“±ë¡
        conversionService.addConverter(new StringToIpPortConverter());
        conversionService.addConverter(new IpPortToStringConverter());

        //í¬ë©§í„° ë“±ë¡
        conversionService.addFormatter(new MyNumberFormatter());

        //ì»¨ë²„í„° ì‚¬ìš©
        IpPort ipPort = conversionService.convert("127.0.0.1:8080", IpPort.class);
        assertThat(ipPort).isEqualTo(new IpPort("127.0.0.1", 8080));

        //í¬ë©§í„° ì‚¬ìš©
        String convert = conversionService.convert(1000, String.class);
        assertThat(convert).isEqualTo("1,000");
    }
}
```

## í¬ë§·í„° ì ìš©í•˜ê¸°

**WebConfig - ìˆ˜ì •**

```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addFormatters(FormatterRegistry registry) {
//        registry.addConverter(new StringToIntegerConverter());
//        registry.addConverter(new IntegerToStringConverter());
        registry.addConverter(new StringToIpPortConverter());
        registry.addConverter(new IpPortToStringConverter());

        registry.addFormatter(new MyNumberFormatter());

    }
}
```

ğŸš¨Â ì£¼ì˜ : StringToIntegerConverter, IntegerToStringConverter ë¥¼ ì£¼ì„ì²˜ë¦¬ í•´ì•¼ í•œë‹¤.

ì™œ? MyNumberFormatter ë„ ìˆ«ì â†’ ë¬¸ì, ë¬¸ì â†’ ìˆ«ìë¡œ ë³€ê²½í•˜ê¸° ë•Œë¬¸ì— ë‘˜ì˜ ê¸°ëŠ¥ì´ ê²¹ì¹œë‹¤.

ìš°ì„ ìˆœìœ„ëŠ” ì»¨ë²„í„°ê°€ ë†’ë‹¤, í¬ë§·í„°ê°€ ì ìš©ë˜ì§€ ì•Šê³  ì»¨ë²„í„°ê°€ ì ìš©ëœë‹¤.

**ì‹¤í–‰ ê²°ê³¼**

[http://localhost:8080/converter-view](http://localhost:8080/converter-view)

```java
${number}: 10000
${{number}}: 10,000
${ipPort}: hello.typeconverter.type.IpPort@59cb0946
${{ipPort}}: 127.0.0.1:8080
```

## ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê¸°ë³¸ í¬ë§·í„°

ìŠ¤í”„ë§ì€ ìë°”ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” íƒ€ì…ì— ëŒ€í•´ ìˆ˜ ë§ì€ í¬ë§·í„°ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•œë‹¤.

ìœ ìš©í•œ í¬ë§·í„° ë‘ê°€ì§€ë¥¼ ì•Œì•„ë³´ì.

1. â€œ`@NumberFormat`â€ : ìˆ«ì ê´€ë ¨ í˜•ì‹ ì§€ì • í¬ë§·í„° ì‚¬ìš© - `NumberFormatAnnotationFormatterFactory`
2. â€œ`@DateTimeFormat`â€ : ë‚ ì§œ ê´€ë ¨ í˜•ì‹ ì§€ì • í¬ë§·í„° ì‚¬ìš© - `Jsr310DateTimeFormatAnnotationFormatterFactory`

**FormatterController**

```java
@Slf4j
@Controller
public class FormatterController {
    @GetMapping("/formatter/edit")
    public String formatterForm(Model model) {
        Form form = new Form();
        form.setNumber(10000);
        form.setLocalDateTime(LocalDateTime.now());
        model.addAttribute(form);
        return "formatter-form";
    }

    @PostMapping("/formatter/edit")
    public String formatterEdit(@ModelAttribute Form form) {
        return "formatter-view";
    }

    @Data
    static class Form {
        @NumberFormat(pattern = "###,###")
        private Integer number;

        @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss")
        private LocalDateTime localDateTime;
    }
}
```

**ì• ë…¸í…Œì´ì…˜ë“¤ë¡œ Formatter ë¥¼ ì§€ì •í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤!**