# 4. ê²€ì¦1 - Validation

## ê²€ì¦ ìš”êµ¬ì‚¬í•­

**ìš”êµ¬ì‚¬í•­**

1. íƒ€ì… ê²€ì¦ - ê°€ê²©, ìˆ˜ëŸ‰ì— ë¬¸ìê°€ ë“¤ì–´ì˜¤ë©´ ê²€ì¦ ì˜¤ë¥˜ ì²˜ë¦¬
2. í•„ë“œ ê²€ì¦ - ìƒí’ˆëª… : ê³µë°±x, ê°€ê²© : 1000ì› ì´ìƒ, 1ë°±ë§Œì› ì´í•˜, ìˆ˜ëŸ‰ : ìµœëŒ€ 9999
3. íŠ¹ì • í•„ë“œì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ì„œëŠ” ê²€ì¦ - ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ 10,000ì› ì´ìƒ

**í˜„ì¬ : ì§€ê¸ˆ ì˜ëª»ëœ ì…ë ¥ì´ ë“¤ì–´ì˜¤ë©´, 400ì—ëŸ¬ : Bad Request ê°€ ë°œìƒí•œë‹¤.**

**ê°œì„  : ì˜ëª»ëœ ê°’ì´ ë“¤ì–´ì˜¤ë©´, ì˜ëª»ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤ ë“±ì˜ ì–´ë–¤ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ëŠ”ì§€ ì‚¬ìš©ìì—ê²Œ ì•Œë ¤ì£¼ì–´ì•¼ í•œë‹¤.**

- ì°¸ê³  : í´ë¼ì´ì–¸íŠ¸ ê²€ì¦, ì„œë²„ ê²€ì¦
    - í´ë¼ì´ì–¸íŠ¸ ê²€ì¦ì€ ì¡°ì‘í•  ìˆ˜ ìˆì–´, ë³´ì•ˆì— ì·¨ì•½í•˜ë‹¤.
    - ì„œë²„ë§Œìœ¼ë¡œ ê²€ì¦í•˜ë©´, ì¦‰ê°ì ì¸ ê³ ê° ì‚¬ìš©ì„±ì´ ë¶€ì¡±í•´ì§„ë‹¤.
    - ë‘˜ì„ ì ì ˆíˆ ì„ë”ë¼ë„, ìµœì¢…ì ìœ¼ë¡œ ì„œë²„ ê²€ì¦ì€ í•„ìˆ˜ì´ë‹¤.
    - API ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´, API ìŠ¤í™ì„ ì˜ ì •ì˜í•˜ì—¬ ê²€ì¦ ì˜¤ë¥˜ë¥¼ API ì‘ë‹µ ê²°ê³¼ì— ì˜ ë„˜ê²¨ì£¼ì–´ì•¼ í•œë‹¤.

**ìƒí’ˆ ì €ì¥ ì„±ê³µ Case**

![image.png](4%20%E1%84%80%E1%85%A5%E1%86%B7%E1%84%8C%E1%85%B3%E1%86%BC1%20-%20Validation%2011d29d746aff8028b27fe8e76a4bc371/image.png)

**ìƒí’ˆ ì €ì¥ ì‹¤íŒ¨ - ê²€ì¦ ì‹¤íŒ¨ Case**

![image.png](4%20%E1%84%80%E1%85%A5%E1%86%B7%E1%84%8C%E1%85%B3%E1%86%BC1%20-%20Validation%2011d29d746aff8028b27fe8e76a4bc371/image%201.png)

**ìš”êµ¬ì‚¬í•­ ì •ë¦¬**

1. ìƒí’ˆ ë“±ë¡ í¼ì—ì„œ ë°›ì•„ì˜¨ model ì—ì„œ ìƒí’ˆ ì €ì¥ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ”ë°, ì´ë•Œ ê²€ì¦ì„ í•´ì•¼ í•œë‹¤.
2. ê²€ì¦ì— ì‹¤íŒ¨í•œë‹¤ë©´, ìœ ì €ì—ê²Œ ë‹¤ì‹œ ìƒí’ˆ ë“±ë¡ í¼ì„ ë³´ì—¬ì¤˜ì•¼ í•œë‹¤.
3. ìœ ì €ëŠ” ì´ì „ ìì‹ ì´ ì…ë ¥í–ˆë˜ ì •ë³´ ì¤‘ ì˜¬ë°”ë¥¸ ì •ë³´ëŠ” ê·¸ëŒ€ë¡œ ë³´ì—¬ì£¼ê³ , ê°€ê²©ì´ ì˜ëª» ì…ë ¥ë˜ì—ˆë‹¤ë©´, ê°€ê²©ì„ ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš” ë¼ëŠ” ë¬¸êµ¬ê°€ ë³´ì—¬ì•¼ í•œë‹¤.
4. ì´ë¥¼ ìœ„í•´ **ê²€ì¦ ë¡œì§ì´ ì‹¤íŒ¨í•˜ë©´, ê¸°ì¡´ ë°›ì•˜ë˜ model ë°ì´í„°ì™€ ê²€ì¦ ì˜¤ë¥˜ ê²°ê³¼ë¥¼ í•¨ê»˜ í¬í•¨í•˜ì—¬ ë‹¤ì‹œ ìƒí’ˆ ë“±ë¡ í¼ì—ê²Œ ì „ë‹¬í•´ì•¼ í•œë‹¤.**

## í”„ë¡œì íŠ¸ V1

### ìƒí’ˆ ë“±ë¡ ê²€ì¦

**ValidationItemControllerV1.class**

```java
@PostMapping("/add")  //ì‹¤ì œ ì €ì¥ ë¡œì§ ì‹¤í–‰
    public String addItem(@ModelAttribute Item item, RedirectAttributes redirectAttributes, Model model) {
        // ê²€ì¦ ì˜¤ë¥˜ ê²°ê³¼ë¥¼ ë³´ê´€
        Map<String, String> errors = new HashMap<>();
        //ê²€ì¦ ë¡œì§
        if (isNull(item)) {
            errors.put("itemName", "ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤");
        }
        if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {
            errors.put("price", "ê°€ê²©ì€ 1,000 ~ 1,000,000 ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤");
        }
        if (item.getQuantity() == null || item.getQuantity() > 9999) {
            errors.put("quantity", "ìˆ˜ëŸ‰ì€ ìµœëŒ€ 9,999ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤");
        }
        if (item.getPrice() != null && item.getQuantity() != null) {
            int resultPrice = item.getPrice() * item.getQuantity();
            if (resultPrice < 10000) {
                errors.put("globalError", "ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ 10,000 ì› ì´ìƒì´ì—¬ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ : " + resultPrice);
            }
        }
        //ê²€ì¦ì— ì‹ªíŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ
        if (hasError(errors)) {
            log.info("errors = {}", errors);
            model.addAttribute("errors", errors);
            return "validation/v1/addForm";
        }

        //ê²€ì¦ì— ì„±ê³µí•œ ì´í›„ ì €ì¥ ë¡œì§
        Item savedItem = itemRepository.save(item);
        redirectAttributes.addAttribute("itemId", savedItem.getId());
        redirectAttributes.addAttribute("status", true);
        return "redirect:/validation/v1/items/{itemId}";
    }

    private static boolean isNull(Item item) {
        return !StringUtils.hasText(item.getItemName());
    }

    private static boolean hasError(Map<String, String> errors) {
        return !errors.isEmpty();
    }
```

- isNull, hasError â†’ ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ë©”ì„œë“œë¡œ ë½‘ì•„ëƒ„. (ë‹¨ì¶•í‚¤ option + command + m)

```java
th:class="${errors?.containsKey('itemName')} ? 'form-control field-error' : 'form-control'"
```

ë§Œì•½, ìƒí’ˆ ëª©ë¡ì—ì„œ ìƒí’ˆ ë“±ë¡ ë²„íŠ¼ì„ ëˆŒëŸ¬ [http://localhost:8080/validation/v1/items/add](http://localhost:8080/validation/v1/items/add) ìš”ì²­ì„ ë³´ëƒˆë‹¤ë©´,

errors Hashmap ê°ì²´ë¥¼ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤ (Get - /add) ë§Œì•½ ì´ë•Œ ? ë¥¼ ë¶™ì´ì§€ ì•ŠëŠ”ë‹¤ë©´, NullPointExceptionì´ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ clasappend ë¥¼ ì‚¬ìš©í•˜ì—¬ nulll point excepiton ì„ ë°©ì§€í•œë‹¤.

- ê°€ê²© (Integer) ì— text (String) ì´ë‚˜ Double , Long íƒ€ì…ì˜ ì…ë ¥ì´ ë“¤ì–´ì˜¤ë©´ ê²€ì¦ì— ì‹¤íŒ¨í•˜ì—¬ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. â†’ í•´ê²° ê³¼ì œ 1
- item ì˜ price ì— ë¬¸ìë¥¼ ì…ë ¥í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ íƒ€ì… ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ê³ ê°ì´ ì…ë ¥í•œ ë¬¸ìë¥¼ í™”ë©´ì— ë‚¨ê²¨ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œ ë˜ë”ë¼ë„ Itemì˜ priceëŠ” Integerì´ë¯€ë¡œ ë¬¸ìë¥¼ ë³´ê´€í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ë¬¸ìê°€ ë°”ì¸ë”©ì´ ë¶ˆê°€í•˜ì—¬ ê³ ê°ì´ ì…ë ¥í•œ ë¬¸ìê°€ ì‚¬ë¼ì§€ê²Œ ë˜ê³ , ê³ ê°ì€ ë³¸ì¸ì´ ì–´ë–¤ ë‚´ìš©ì„ ì…ë ¥í•˜ì—¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€ ëª¨ë¥¸ë‹¤. â†’ ê²°êµ­ ì˜ëª» ì…ë ¥ëœ ê°’ë„ ì–´ë”˜ê°€ì— ì €ì¥ë˜ì–´ì•¼ í•œë‹¤.

## í”„ë¡œì íŠ¸ V2

TipğŸ’¡Â í˜ì´ì§€ì—ì„œ replace : ë‹¨ì¶•í‚¤ command + R

TipğŸ’¡Â ë””ë ‰í† ë¦¬, íŒ¨í‚¤ì§€ ì„ íƒí•˜ê³ , ì„ íƒí•œ í•˜ìœ„ ëª¨ë“  í˜ì´ì§€ì—ì„œ replace : ë‹¨ì¶•í‚¤ command + Shift + R

V1 â†’ V2 ìƒì„±.

## BindingResult 1

**ValidationItemControllerV2**

```java
@PostMapping("/add")  //ì‹¤ì œ ì €ì¥ ë¡œì§ ì‹¤í–‰
public String addItem(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {
	...    
}
```

â†’ @ModelAttribute ë’¤ì— BindingResult ë¥¼ ì¶”ê°€í•œë‹¤.

â†’ ì˜¤ë¥˜ê°€ ìƒê¸°ë©´ BindingResult ì— ë‹´ëŠ”ë‹¤. ì´ê²ƒì´ V1 ì˜ errorsì™€ ê°™ì€ ì—­í• ì„ í•œë‹¤.

```java
//ê²€ì¦ ë¡œì§
if (isNull(item)) {
    bindingResult.addError(new FieldError("item", "itemName", "ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤"));
}
```

ì˜¤ë¥˜ì˜ ì¢…ë¥˜ : 

1. íŠ¹ì • Field ì— ëŒ€í•œ ì˜¤ë¥˜ : FieldError
2. Global ì˜¤ë¥˜ : ObjectError

**FieldErrorëŠ” 2ê°€ì§€ ìƒì„±ìë¥¼ ì œê³µí•˜ê³ , ê·¸ì¤‘ ì²«ë²ˆì§¸ëŠ” 3ê°€ì§€ íŒŒë¼ë¯¸í„°ê°€ ìˆë‹¤.**

1. objectName : item â†’ ëª¨ë¸ attributeì— ë‹´ê¸°ëŠ” ì´ë¦„
2. field : itemName â†’ item ì˜ itemName
3. default message â†’ â€œìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤â€

**ObjectErrorëŠ” 2ê°€ì§€ íŒŒë¼ë¯¸í„°ê°€ ìˆë‹¤.**

1. objectëª… : item â†’ ëª¨ë¸ attributeì— ë‹´ê¸°ëŠ” ì´ë¦„
2. message â†’ `"ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ 10,000 ì› ì´ìƒì´ì—¬ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ : " + resultPrice`

ì´í›„, ê²€ì¦ì— ì‹¤íŒ¨ ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ return í•´ì•¼ í•œë‹¤.

```java
//ê²€ì¦ì— ì‹ªíŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ
if (bindingResult.hasErrors()) {
    log.info("errors = {}", bindingResult);
    return "validation/v2/addForm";
}
```

- ë‹¨, model.addAttribute í•˜ì§€ ì•Šì•„ë„ ë¨. ì™œ? â†’ Binding resultëŠ” ìë™ìœ¼ë¡œ Viewì— ê°™ì´ ë„˜ì–´ê°„ë‹¤.

## BindingResult 2

- BindingResult : ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê²€ì¦ ì˜¤ë¥˜ë¥¼ ë³´ê´€í•˜ëŠ” ê°ì²´ì´ë‹¤. ê²€ì¦ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì—¬ê¸°ì— ë³´ê´€í•˜ë©´ ëœë‹¤.
- `BindingResult` ê°€ ìˆìœ¼ë©´ `@ModelAttribute` ì— ë°ì´í„° ë°”ì¸ë”© ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œëœë‹¤!

ë§Œì•½, @ModelAttribureì— ë°”ì¸ë”© ì‹œ íƒ€ì… ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´?

- BindingResult  ê°€ ì—†ìœ¼ë©´ â†’ 400 ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œë˜ì§€ ì•Šê³ , ì˜¤ë¥˜ í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤.
- BindingResult ê°€ ìˆìœ¼ë©´ â†’ ì˜¤ë¥˜ ì •ë³´ (FieldError) ë¥¼ BindingResult ì— ë‹´ì•„ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì •ìƒ í˜¸ì¶œí•œë‹¤.

![image.png](4%20%E1%84%80%E1%85%A5%E1%86%B7%E1%84%8C%E1%85%B3%E1%86%BC1%20-%20Validation%2011d29d746aff8028b27fe8e76a4bc371/image%202.png)

## FieldError, ObjectError

**ValidationItemControllerV2.class - addItemV2**

```java
@PostMapping("/add")  //ì‹¤ì œ ì €ì¥ ë¡œì§ ì‹¤í–‰
public String addItemV2(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {
    //ê²€ì¦ ë¡œì§
    if (isNull(item)) {
        bindingResult.addError(new FieldError("item", "itemName", item.getItemName(),false,null,null, "ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤"));
    }
    if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {
        bindingResult.addError(new FieldError("item", "price", item.getPrice(), false, null, null, "ê°€ê²©ì€ 1,000 ~ 1,000,000 ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤"));
    }
    if (item.getQuantity() == null || item.getQuantity() > 9999) {
        bindingResult.addError(new FieldError("item", "quantity", item.getQuantity(), false, null, null, "ìˆ˜ëŸ‰ì€ ìµœëŒ€ 9,999ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤"));
    }
    if (item.getPrice() != null && item.getQuantity() != null) {
        int resultPrice = item.getPrice() * item.getQuantity();
        if (resultPrice < 10000) {
            bindingResult.addError(new ObjectError("item", null, null, "ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ 10,000 ì› ì´ìƒì´ì—¬ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ : " + resultPrice));
        }
    }
    //ê²€ì¦ì— ì‹ªíŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ
    if (bindingResult.hasErrors()) {
        log.info("errors = {}", bindingResult);
        return "validation/v2/addForm";
    }

    //ê²€ì¦ì— ì„±ê³µí•œ ì´í›„ ì €ì¥ ë¡œì§
    Item savedItem = itemRepository.save(item);
    redirectAttributes.addAttribute("itemId", savedItem.getId());
    redirectAttributes.addAttribute("status", true);
    return "redirect:/validation/v2/items/{itemId}";
    }
```

**FieldError**

- FieldError ëŠ” ë‘ê°€ì§€ ìƒì„±ìë¥¼ ì œê³µí•˜ê³ , ê·¸ ë‘ë²ˆì§¸ ìƒì„±ì
    
    ```java
    //ìœ„ì˜ BindingResult1 ì—ì„œ ì‚¬ìš©í•œ ìƒì„±ì
    public FieldError(String objectName, 
    									String field, 
    									String defaultMessage);
    									
    //í˜„ì¬ BindingResult2 ì—ì„œ ì‚¬ìš©í•œ ìƒì„±ì									
    public FieldError(String objectName,
    									String field, 
    									@Nullable Object rejectedValue, 
    									boolean bindingFailure, 
    									@Nullable String[] codes, 
    									@Nullable Object[] arguments, 
    									@Nullable String defaultMessage)
    ```
    
    - objectName : ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê°ì²´ ì´ë¦„
    - field : ì˜¤ë¥˜ í•„ë“œ
    - rejectedValue : ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê°’ (= ê±°ì ˆëœ ê°’)
    - bindingFailure : íƒ€ì… ì˜¤ë¥˜ ê°™ì€ ë°”ì¸ë”© ì‹¤íŒ¨ì¸ì§€? ì•„ë‹ˆë©´ ê²€ì¦ ì‹¤íŒ¨ì¸ì§€? - ë°”ì¸ë”© ì‹¤íŒ¨ : true, ê²€ì¦ ì‹¤íŒ¨ : false
    - codes : ë©”ì‹œì§€ ì½”ë“œ
    - arguments : ë©”ì‹œì§€ì— ì‚¬ìš©ë˜ëŠ” ì¸ì
    - defaultMessage : ê¸°ë³¸ ì˜¤ë¥˜ ë©”ì‹œì§€
- **ìœ„ì˜ ìƒì„±ìë¥¼ ì‚¬ìš©í•œ FieldError ì²˜ë¦¬**
    
    ```java
    bindingResult.addError(new FieldError("item", "itemName", item.getItemName(),false,null,null, "ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤"));
    ```
    
- íƒ€ì„ ë¦¬í”„ì—ì„œ ì‚¬ìš©ì ì…ë ¥ ê°’ì„ ìœ ì§€
    - `th:field = â€œ*{price}â€` ëŠ” ì •ìƒ ìƒí™©ì¼ ë•Œ, ëª¨ë¸ ê°ì²´ì˜ ê°’ì„ ì‚¬ìš©í•˜ê³ , ì˜¤ë¥˜ê°€ ë°œìƒ ì‹œ FieldErrorì—ì„œ ë³´ê´€í•œ ê°’ì„ ì‚¬ìš©í•´ì„œ ê°’ì„ ì¶œë ¥í•œë‹¤.

![image.png](4%20%E1%84%80%E1%85%A5%E1%86%B7%E1%84%8C%E1%85%B3%E1%86%BC1%20-%20Validation%2011d29d746aff8028b27fe8e76a4bc371/image%203.png)

â†’ Failed to convert property value of type java.lang.String to required type java.lang.Integer for property price; nested exception is java.lang.NumberFormatException: For input string: "qqqâ€
: ìŠ¤í”„ë§ì´ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•´ì£¼ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ì´ë‹¤.

í•˜ì§€ë§Œ, ë¶ˆì¹œì ˆí•˜ê³  ê°œë°œììŠ¤ëŸ½ë‹¤,,, ì¼ë°˜ ì‚¬ìš©ìì—ê²Œ ì¹œì ˆí•˜ì§€ ì•Šë‹¤. â†’ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ê³µë¶€í•´ë³´ì!

## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 1

- messages ì²˜ë¦¬ë¥¼ ìœ„í•´ ê¸°ë³¸ìœ¼ë¡œ ë“±ë¡ëœ messages ì´ì™¸ì— errors ë¥¼ [application.properties](http://application.properties) ì— ì¶”ê°€í•œë‹¤.
- src/main/resources/errors.properties ë¥¼ ìƒì„± í›„ ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤.
    
    ```java
    required.item.itemName=ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.
    range.item.price=ê°€ê²©ì€ {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
    max.item.quantity=ìˆ˜ëŸ‰ì€ ìµœëŒ€ {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
    totalPriceMin=ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ {0}ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = {1}
    ```
    

â†’ error_en.properties íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì˜¤ë¥˜ë©”ì‹œì§€ë„ êµ­ì œí™” ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.

**ì´ì œ errors ì— ë“±ë¡í•œ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•´ë³´ì.**

**ValidationItemControllerV2.class - addItemV3() ì¶”ê°€**

```java
@PostMapping("/add")  //ì‹¤ì œ ì €ì¥ ë¡œì§ ì‹¤í–‰
public String addItemV3(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {
    //ê²€ì¦ ë¡œì§
    if (isNull(item)) {
        bindingResult.addError(new FieldError("item", "itemName", item.getItemName(), false, new String[]{"required.item.itemName"}, null, null));
    }
    if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {
        bindingResult.addError(new FieldError("item", "price", item.getPrice(), false, new String[]{"range.item.price"}, new Object[]{1000, 1000000}, null));
    }
    if (item.getQuantity() == null || item.getQuantity() > 9999) {
        bindingResult.addError(new FieldError("item", "quantity", item.getQuantity(), false, new String[]{"max.item.quantity"}, new Object[]{9999}, null));
    }
    if (item.getPrice() != null && item.getQuantity() != null) {
        int resultPrice = item.getPrice() * item.getQuantity();
        if (resultPrice < 10000) {
            bindingResult.addError(new ObjectError("item", new String[]{"totalPriceMin"}, new Object[]{10000, resultPrice}, null));
        }
    }
    //ê²€ì¦ì— ì‹ªíŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ
    if (bindingResult.hasErrors()) {
        log.info("errors = {}", bindingResult);
        return "validation/v2/addForm";
    }

    //ê²€ì¦ì— ì„±ê³µí•œ ì´í›„ ì €ì¥ ë¡œì§
    Item savedItem = itemRepository.save(item);
    redirectAttributes.addAttribute("itemId", savedItem.getId());
    redirectAttributes.addAttribute("status", true);
    return "redirect:/validation/v2/items/{itemId}";
}
```

- codes : `null` â†’ `String[]{â€â€¦â€, â€â€¦â€}` : errors.properties ì—ì„œ ì˜¤ë¥˜ë©”ì‹œì§€ë¥¼ ì°¾ëŠ”ë‹¤, ì—†ìœ¼ë©´ defaultMessage ì¶œë ¥ë¨.
- arguments : `null` â†’ `Object[]{ â€¦ , â€¦ }` : ì˜¤ë¥˜ë©”ì‹œì§€ì— ë„˜ê¸¸ ì¸ìë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤.

## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬2

- FieldError, ObjectError ì˜ ì¸ìë¥¼ í•˜ë‚˜í•˜ë‚˜ ë„£ì–´ì•¼í•œë‹¤ â†’ ë‹¤ë£¨ê¸°ê°€ ì–´ë µê³ , ë²ˆê±°ë¡­ë‹¤.
- ì˜¤ë¥˜ ì½”ë“œë„ ì¢€ ë” ìë™í™” í•  ìˆ˜ ìˆì„ê¹Œ??

 â†’ Controllerì—ì„œ BindingResultëŠ” ê²€ì¦í•´ì•¼ í•  ê°ì²´ ë°”ë¡œ ë‹¤ìŒì— ì˜¨ë‹¤. ë”°ë¼ì„œ BindingResultëŠ” ì´ë¯¸ ë³¸ì¸ì´ ê²€ì¦í•´ì•¼ í•  ê°ì²´ë¥¼ ì•Œê³  ìˆë‹¤.

### rejectValue(), reject()

BindingResult ëŠ” rejectValue(), reject() ë¥¼ ì œê³µí•œë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë©´ , FieldError ì™€ ObjectError ë¥¼ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šê³ , ê¹”ë”í•˜ê²Œ ì˜¤ë¥˜ë¥¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤.

**addItemV3 (Before)**

```java
bindingResult.addError(new FieldError("item", "itemName", item.getItemName(), false, new String[]{"required.item.itemName"}, null, null));
bindingResult.addError(new FieldError("item", "price", item.getPrice(), false, new String[]{"range.item.price"}, new Object[]{1000, 1000000}, null));
bindingResult.addError(new FieldError("item", "quantity", item.getQuantity(), false, new String[]{"max.item.quantity"}, new Object[]{9999}, null));
bindingResult.addError(new ObjectError("item", new String[]{"totalPriceMin"}, new Object[]{10000, resultPrice}, null));
```

**addItemV4 (After)**

```java
bindingResult.rejectValue("itemName", "required"); 
bindingResult.rejectValue("price", "range", new Object[]{1000, 1000000}, null);
bindingResult.rejectValue("quantity", "max", new Object[]{9999}, null);
bindingResult.reject("totalPriceMin", new Object[]{10000, resultPrice}, null);
```

rejectValue() ëŠ” 3ê°€ì§€ ë°©ë²•ì„ ì§€ì›í•œë‹¤.

1. `void rejectValue*(*@Nullable String field, String errorCode*)*;`
2. `void rejectValue*(*@Nullable String field, String errorCode, String defaultMessage*)*;`
3. `void rejectValue*(*@Nullable String field, String errorCode, @Nullable Object*[]* errorArgs, @Nullable String defaultMessage*)*;`

reject() ë„ 3ê°€ì§€ ë°©ë²•ì„ ì§€ì›í•œë‹¤.

1. `void reject*(*String errorCode*)*;`
2. `void reject*(*String errorCode, String defaultMessage*)*;`
3. `void reject*(*String errorCode, @Nullable Object*[]* errorArgs, @Nullable String defaultMessage*)*;`

ë¶„ëª… errors.propertiesì— errorCode ë¥¼ 
`required.item.itemName=ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.`

ë¼ê³  í•˜ì˜€ë‹¤.

í•˜ì§€ë§Œ, rejectValueì˜ errorCode ë¡œ ë„˜ê²¨ì¤€ ê°’ì€ â€œrequiredâ€,  â€œrangeâ€,  â€œmaxâ€,  â€œtotalPriceMinâ€ ì´ë‹¤.

ì–´ë–»ê²Œ required â†’ required.item.itemName ìœ¼ë¡œ ì°¾ì„ê¹Œ??

**MessageCodesResolver ë¥¼ í†µí•´ ì°¾ëŠ”ë‹¤!**

## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 3

ê¸°ì¡´ ë§Œë“¤ì—ˆë˜ ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” ìƒì„¸íˆ, ìì„¸íˆ ë§Œë“¤ì—ˆë‹¤.

```java
required.item.itemName=ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.
range.item.price=ê°€ê²©ì€ {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
max.item.quantity=ìˆ˜ëŸ‰ì€ ìµœëŒ€ {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
totalPriceMin=ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ {0}ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = {1}
```

í•˜ì§€ë§Œ, ë²”ìš©ì„±ì„ ê°–ì¶° ë‹¨ìˆœí•˜ê²Œ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.

```java
required=í•„ìˆ˜ ê°’ ì…ë‹ˆë‹¤.
range=ë²”ìœ„ëŠ” {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
max=ìµœëŒ€ {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
```

í•˜ì§€ë§Œ, ë©”ì‹œì§€ë¥¼ ì„¸ë°€í•˜ê²Œ ì‘ì„±í•˜ê¸° ì–´ë µë‹¤.

ë§Œì•½, ìœ„ì˜ ë‘ê°œê°€ ë™ì‹œì— ì‘ì„±ë˜ì–´ ìˆë‹¤ë©´, `bindingResult.rejectValue("itemName", "required");` ì€ ì–´ë–¤ê²ƒì„ ê³ ë¥´ê²Œ ë ê¹Œ?

â†’ ê°ì²´ëª…ê³¼ í•„ë“œëª…ì„ ì¡°í•©í•œ ì„¸ë°€í•œ ë©”ì‹œì§€ ì½”ë“œê°€ ìˆë‹¤ë©´, í•´ë‹¹ ë©”ì‹œì§€ (=ì„¸ë°€í•œ ë©”ì‹œì§€) ë¥¼ ë†’ì€ ìš°ì„ ìˆœìœ„ë¡œ ì‚¬ìš©í•œë‹¤.

## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 4

**Test**

```java
    @Test
    void messageCodesResolverObject() {
        String[] messageCodes = codesResolver.resolveMessageCodes("required", "item");
        for (String messageCode : messageCodes) {
            System.out.println("messageCode = " + messageCode);
        }
    }
```

**ì‹¤í–‰ ê²°ê³¼**

```java
messageCode = required.item
messageCode = required
```

â†’ String[] ì„ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ìš°ì„  ìˆœìœ„ëŠ” ë””í…Œì¼ í•œ ê²ƒì´ ë¨¼ì €ì´ë‹¤.

**Test**

```java
@Test
    void messageCodesResolverField() {
        String[] messageCodes = codesResolver.resolveMessageCodes("required", "item", "itemName", String.class);
        for (String messageCode : messageCodes) {
            System.out.println("messageCode = " + messageCode);
        }
    }
```

**ì‹¤í–‰ ê²°ê³¼**

```java
messageCode = required.item.itemName
messageCode = required.itemName
messageCode = required.java.lang.String
messageCode = required
```

## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 5

**errors.properties ì¶”ê°€**

Level1 ~ 4ê¹Œì§€ ì¶”ê°€.

```java
#Level1
required.item.itemName
...
#Level2
...
#Level3
required.java.lang.String
...
#Level4
required
```

- ê°ê° ë ˆë²¨ì„ ì£¼ì„ ì²˜ë¦¬í•˜ë©° ì–´ë–¤ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤.

### ValidationUtils

ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ. ê¸°ëŠ¥ì€ Empty ë˜ëŠ” ê³µë°± ì¸ ê²½ìš°ë§Œ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.

```java
//Before
if (isNull(item)) {
  bindingResult.rejectValue("itemName", "required");
}

//After
ValidationUtils.rejectIfEmptyOrWhitespace(bindingResult, "itemName", "required");
```

## ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 6

**ê²€ì¦ ì˜¤ë¥˜ ì½”ë“œëŠ” 2ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.**

1. ê°œë°œìê°€ ì§ì ‘ ì„¤ì •í•œ ì˜¤ë¥˜ ì½”ë“œ â†’ rejectValue() ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ì•¼ í•œë‹¤.
2. ìŠ¤í”„ë§ì´ ì§ì ‘ ê²€ì¦ ì˜¤ë¥˜ì— ì¶”ê°€í•œ ê²½ìš° (ì˜ˆì‹œ : íƒ€ì…ì´ ë§ì§€ ì•ŠëŠ” ê²½ìš° â€œtypeMismatchâ€

![image.png](4%20%E1%84%80%E1%85%A5%E1%86%B7%E1%84%8C%E1%85%B3%E1%86%BC1%20-%20Validation%2011d29d746aff8028b27fe8e76a4bc371/image%204.png)

- **ê°€ê²©ì— Integer type ì´ ì•„ë‹Œ, ë‹¤ë¥¸ ìë£Œí˜•ì´ ì…ë ¥ë˜ì—ˆì„ ë•Œ, ì—ëŸ¬ ë¡œê·¸ë¥¼ ì¶œë ¥í•œ ê²°ê³¼ì´ë‹¤.**
    
    codes â†’ String[]
    
    - codes[0] : typeMismatch.item.price
    - codes[1] : typeMismatch.price
    - codes[2] : typeMismatch.java.lang.Integer
    - codes[3] : typeMismatch

- default message : default message [Failed to convert property value of type 'java.lang.String' to required type 'java.lang.Integer' for property 'price'; nested exception is java.lang.NumberFormatException: For input string: "price!!!â€

ì•ì—ì„œì˜ errors.propertiesì— ë©”ì‹œì§€ë¥¼ ì¶”ê°€í•˜ì—¬ ìš°ì„  ìˆœìœ„ì— ë”°ë¥¸ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í–ˆë‹¤.

ê·¸ê²ƒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ, ìœ„ 4ê°œì˜ ì½”ë“œì´ë¦„ê³¼ ê°™ì€ ì´ë¦„ìœ¼ë¡œ ë‚´ê°€ ì›í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ì¶”ê°€í•˜ë©´ ë‚´ê°€ ì„¤ì •í•œ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

**ê²°ê³¼ì ìœ¼ë¡œ ì†ŒìŠ¤ì½”ë“œë¥¼ í•˜ë‚˜ë„ ê±´ë“¤ì§€ ì•Šê³ , ì›í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ë‹¨ê³„ë³„ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤!**

## Validator ë¶„ë¦¬ 1

í˜„ì¬ê¹Œì§€ëŠ” ê²€ì¦ ë¡œì§ì´ Controller ì— ë¶™ì–´ ìˆê³ , ì´ê²ƒì˜ ë¹„ì¤‘ì´ ë§¤ìš° í¬ë‹¤.

ì¦‰, ControllerëŠ” í•µì‹¬ ë¡œì§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ê¸°ëŠ¥ì„ ë§ì´ í•˜ëŠ” ì¤‘ì´ë‹¤.

**ì´ê²ƒì„ ë³„ë„ì˜ ê²€ì¦ ì—­í•  í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì!**

**ItemValidator.class â† implement Validator.interface**

```java
@Slf4j
@Component
public class ItemValidator implements Validator {
    @Override
    public boolean supports(Class<?> clazz) {
        return Item.class.isAssignableFrom(clazz);
    }

    @Override
    public void validate(Object target, Errors errors) {
        Item item = (Item) target;
        //ê²€ì¦ ë¡œì§
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "itemName", "required");

        if (item.getPrice() == null || item.getPrice() < 1000 || item.getPrice() > 1000000) {
            errors.rejectValue("price", "range", new Object[]{1000, 1000000}, null);
        }
        if (item.getQuantity() == null || item.getQuantity() > 9999) {
            errors.rejectValue("quantity", "max", new Object[]{9999}, null);
        }
        if (item.getPrice() != null && item.getQuantity() != null) {
            int resultPrice = item.getPrice() * item.getQuantity();
            if (resultPrice < 10000) {
                errors.reject("totalPriceMin", new Object[]{10000, resultPrice}, null);
            }
        }
    }
}
```

**ValidationItemControllerV2.class ì¶”ê°€ ë° ìˆ˜ì •**

```java
private final ItemValidator itemValidator; //ì¶”ê°€

@PostMapping("/add")  //ìˆ˜ì •
public String addItemV5(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {

    itemValidator.validate(item, bindingResult);
    //ê²€ì¦ì— ì‹ªíŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ
    if (bindingResult.hasErrors()) {
        log.info("errors = {}", bindingResult);
        return "validation/v2/addForm";
    }

    //ê²€ì¦ì— ì„±ê³µí•œ ì´í›„ ì €ì¥ ë¡œì§
    Item savedItem = itemRepository.save(item);
    redirectAttributes.addAttribute("itemId", savedItem.getId());
    redirectAttributes.addAttribute("status", true);
    return "redirect:/validation/v2/items/{itemId}";
    }
```

**TipğŸ’¡**

@RequiredArgsConstructor â†” ìƒì„±ì + @Autowired

: ìƒì„±ìê°€ í•˜ë‚˜ì¼ ë•ŒëŠ” Autowired ìƒëµ ê°€ëŠ¥.

ì™œ ì´ë ‡ê²Œ ì“¸ê¹Œ?? â†’ ì‹±ê¸€í†¤ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´, ê°ì²´ë¥¼ ê³„ì† ìƒì„±í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```java
private final ItemValidator itemValidator;
...
itemValidator.validate(item, bindingResult); //ì‹±ê¸€í†¤ ë°©ì‹ 
->
new NoSpringBeanItemValidator().validate(item, bindingResult);

///

public class NoSpringBeanItemValidator{

    public void validate(Object target, Errors errors) {
        Item item = (Item) target;
        //ë™ì¼í•œ ê²€ì¦ ë¡œì§
        ...
        }
	  }
}
```

ê°€ëŠ¥ì€ í•˜ë‹¤ë§Œ,,, ìš”ì²­ì— ëŒ€í•œ ê°ì²´ê°€ ë°˜ë³µë˜ì–´ ìƒì„±ëœë‹¤. 

**ë‹¤ìŒ ë‹¨ê³„ì—ì„œ supports() , validate(Object target, Errors errors) ê°€ ë¬´ì—‡ì¸ì§€ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì•Œì•„ë³´ì.**

## Validator ë¶„ë¦¬ 2

`WebDataBinder` : ìŠ¤í”„ë§ MVC ë‚´ë¶€ì—ì„œ ìŠ¤í”„ë§ì˜ íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì—­í• ì„ í•´ì£¼ê³ , ê²€ì¦ ê¸°ëŠ¥ë„ ë‚´ë¶€ì— í¬í•¨í•œë‹¤.

ì´ê²ƒì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì• ë…¸í…Œì´ì…˜ @InitBinder ë¥¼ ë¶™ì—¬ì¤€ë‹¤. 

**ê·¸ëŸ¬ë©´, ì• ë…¸í…Œì´ì…˜ @InitBinder ë¶™ì€ ë§¤ì„œë“œëŠ” ì–¸ì œ í˜¸ì¶œì´ ë˜ëŠ”ê°€?**

: ì´ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œ ë  ë•Œ ë§ˆë‹¤ (í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ìš”ì²­ì´ ì˜¬ ë•Œ ë§ˆë‹¤) í•­ìƒ ë¶ˆë ¤ì ¸ì„œ WebDataBinder ê°€ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ê³ , ê²€ì¦ê¸°ê°€ ë‚´ë¶€ì— ë“¤ì–´ìˆë‹¤.

**ì´ëŸ¬í•œ ì´ìœ ë¡œ, ë‹¹ì—°íˆ ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤!**

**addItemV6**

```java
@PostMapping("/add")  //ì‹¤ì œ ì €ì¥ ë¡œì§ ì‹¤í–‰
public String addItemV6(@Validated @ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {
    //ê²€ì¦ì— ì‹ªíŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ
    if (bindingResult.hasErrors()) {
        log.info("errors = {}", bindingResult);
        return "validation/v2/addForm";
    }

    //ê²€ì¦ì— ì„±ê³µí•œ ì´í›„ ì €ì¥ ë¡œì§
    Item savedItem = itemRepository.save(item);
    redirectAttributes.addAttribute("itemId", savedItem.getId());
    redirectAttributes.addAttribute("status", true);
    return "redirect:/validation/v2/items/{itemId}";
}
```

â†’ ê²€ì¦ í•˜ê³ ì í•˜ëŠ” ModelAttribute ì•ì— @Validated ì• ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤€ë‹¤.

**@Validated**

- ê²€ì¦ê¸°ë¥¼ ì‹¤í–‰í•˜ë¼ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë‹¤.
- í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ì´ ë¶™ìœ¼ë©´ ì•ì„œ WebDataBinder ì— ë“±ë¡í•œ ê²€ì¦ê¸°ë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤.
- **ë§Œì•½, WebDataBinder ì— ì—¬ëŸ¬ ê²€ì¦ê¸°ê°€ ë“±ë¡ë˜ì—ˆë‹¤ë©´? (ë¡œê·¸ì¸, ìˆ˜ì •, ë“±ë“±ì˜ ë‹¤ë¥¸ ìƒí™©ë³„ ê²€ì¦ê¸°)**
- **ì–´ë–¤ ê²€ì¦ê¸°ë¥¼ ì‹¤í–‰í•´ì•¼ í• ì§€ êµ¬ë¶„í•´ì•¼ í•œë‹¤! â†’ supports() ê°€ ì‚¬ìš©ëœë‹¤!**
    
    ```java
        @Override
        public boolean supports(Class<?> clazz) {
            return Item.class.isAssignableFrom(clazz);
        }
    ```
    
    - supports(Item.class) ê°€ í˜¸ì¶œì´ ë˜ê³ , supports(Item.class) return ê°’ì´ true ê°€ ëœë‹¤. ë”°ë¼ì„œ í•´ë‹¹ ìš”ì²­ì—ì„œëŠ” ItemValidatorê°€ ì‚¬ìš©ë˜ì–´ ItemValidator.validate() ê°€ í˜¸ì¶œë  ìˆ˜ ìˆë‹¤.

**ì°¸ê³ ** : `@Validated`ëŠ” ìŠ¤í”„ë§ ì „ìš© ê²€ì¦ ì• ë…¸í…Œì´ì…˜ì´ê³ , `@Valid` ëŠ” ìë°” í‘œì¤€ ê²€ì¦ ì• ë…¸í…Œì´ì…˜ì´ë‹¤. ë‘˜ ë‹¤ ì‚¬ìš© ê°€ëŠ¥í•˜ê¸´ í•˜ë‹¤. í•˜ì§€ë§Œ, `@Valid` ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `build.gradle` dependency ì¶”ê°€ê°€ í•„ìš”í•¨.